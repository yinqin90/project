!function(e){e.fn.ajaxsave=function(t){var a=e.extend({},e.fn.ajaxsave.defaults,t);return this.each(function(){var t=e(this).hasClass("validate"),n=this;t&&require(["http://cdn08.360guanai.com/guanaihui/js/util/validation/js/languages/jquery.validationEngine-zh_CN.js","http://cdn08.360guanai.com/guanaihui/js/util/validation/js/jquery.validationEngine.js"],function(){e(n).validationEngine({promptPosition:a.promptPosition,autoHidePrompt:!0,autoHideDelay:5e3,scroll:a.scroll})}),e(a.submitBtnSelector).click(function(){e(n).trigger("submit")}),e(this).submit(function(){return a.beforeSaveInterface&&a.beforeSaveInterface(),e(this).validationEngine("validate")&&e.fn.ajaxsave.save(this,a),!1})})},e.fn.ajaxsave.save=function(t,a){var n=e(t).attr("action"),i=void 0===e(t).attr("method")?"GET":e(t).attr("method").toUpperCase();a.priceRound&&e(t).find("."+a.priceClassName).each(function(){var t=parseFloat(e(this).val()).toFixed(a.pricePrecision);e(this).val(t)}),a.onSavingInterface&&a.onSavingInterface();try{e.ajax({url:n,data:e(t).serialize(),type:i,dataType:a.dataType,beforeSend:function(e){e.setRequestHeader("X-Requested-With","XMLHttpRequest")},error:function(){a.onErrorInterface()},success:function(e){"200"===e.code.toString()?a.onSuccessInterface(e.result):a.onExceptionInterface(e.message)}})}catch(o){console.log("错误名称："+o.name+"\n错误描述："+o.message)}},e.fn.ajaxsave.defaults={submitBtnSelector:"input[type='submit']",beforeSaveInterface:null,onSavingInterface:null,onErrorInterface:null,onSuccessInterface:null,onExceptionInterface:null,dataType:"jsonp",priceRound:!0,priceClassName:"price-round",pricePrecision:2,promptPosition:"topLeft",scroll:!0}}(jQuery);