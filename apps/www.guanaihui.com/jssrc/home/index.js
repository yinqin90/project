/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：www.guanaihui.com
 2. 页面名称：index(首页)
 3. 作者：尹芹(yinqin@guanaihui.com)
 4. 备注：
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
function IndexController() {
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
     继承于Controller基类
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    Controller.call(this);
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    页面顶部全部服务分类下拉
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.servicesCategory({
        "mode": "auto"
    });
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    tab切换
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.swapTabs();
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    热门体检机构鼠标悬浮事件
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.hotRecommendListener();
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    首页的banner滑动
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.initSlider();
};

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
首页的banner滑动
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
IndexController.prototype.initSlider = function() {
    require([this.utilStaticPrefix + "/jquery.slide.min.js"], function(){
        $(".bannerSwap").slide({
            autoPlay : true ,
            titCell : ".header-pagination ul li" ,
            effect : "leftLoop" ,
            interTime : 4000 ,
            vis : 1            
        }) ;
    }) ;   
} ;
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
热门体检机构鼠标悬浮事件,延迟两秒
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
IndexController.prototype.hotRecommendListener = function() {
    if ($(".hot-recommend a").size() === 0) return;
    var timoutid = null;
    $(".hot-recommend a").each(function(index) {
        $(this).mouseover(function() {
            var aNode = $(this);
            timoutid = setTimeout(function() {
                aNode.addClass("selected").find("dl").slideDown().parent("a").siblings("a").removeClass("selected").find("dl").slideUp();
            }, 200);
        }).mouseout(function() {
            clearTimeout(timoutid);
        });
    });

};
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 类的初始化
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function() {
    new IndexController;
});
