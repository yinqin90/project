function LoginController(){Controller.call(this),this.submitForm(),this.sendSms(),this.refreshValidateCode()}LoginController.prototype.submitForm=function(){var e=this;require([e.utilStaticPrefix+"/jquery.ajaxsave.min.js"],function(){var a=$("form input[name='validateCode']"),t=$("form input[name='smsCode']");$("form").ajaxsave({dataType:e.apiDataType,beforeSaveInterface:function(){void 0==a.attr("data-validation-engine")&&(a.attr("data-validation-engine","validate[required]"),a.attr("data-errormessage-value-missing","验证码不能为空"),t.attr("data-validation-engine","validate[required]"),t.attr("data-errormessage-value-missing","短信动态码不能为空")),$("form").attr("action",e.loginApiUrl)},onSavingInterface:function(){e.tips("正在进行处理，请稍等...",3)},onErrorInterface:function(){e.tips("请求失败，请检查您的接口！",3)},onSuccessInterface:function(a){window.location.href=void 0!=a&&""!=a?a:e.welcomeUrl},onExceptionInterface:function(a){e.tips('<span class="text-danger">'+a+"</span>",5)}})})},LoginController.prototype.sendSms=function(){var e=this;require([e.utilStaticPrefix+"/validation/js/languages/jquery.validationEngine-zh_CN.js",e.utilStaticPrefix+"/validation/js/jquery.validationEngine.js"],function(){$("form").validationEngine({promptPosition:"topLeft",autoHidePrompt:!0,autoHideDelay:5e3,showOneMessage:!0,maxErrorsPerField:1,validationEventTrigger:""}),$("#btnGetSmsCode").on("click",function(a){var t,i=60,n=$(this),r=$("form input[name='mobile']"),o=$("form input[name='validateCode']"),s=$("form input[name='smsCode']");if(void 0!=o.attr("data-validation-engine")&&(o.removeAttr("data-validation-engine"),o.removeAttr("data-errormessage-value-missing"),s.removeAttr("data-validation-engine"),s.removeAttr("data-errormessage-value-missing")),t=$("form").validationEngine("validate"),!t)return!1;if(n.hasClass(".disabled"))return!1;var d={mobile:$.trim(r.val()),smsType:0},l={process:function(){n.addClass("disabled"),o.attr("data-validation-engine","validate[required]"),o.attr("data-errormessage-value-missing","验证码不能为空"),s.attr("data-validation-engine","validate[required]"),s.attr("data-errormessage-value-missing","短信动态码不能为空");var e=window.setInterval(function(){i-=1,n.html("重新发送("+i+"s)"),0===i&&(n.html("发送验证码"),n.removeClass("disabled"),o.removeAttr("data-validation-engine"),o.removeAttr("data-errormessage-value-missing"),s.removeAttr("data-validation-engine"),s.removeAttr("data-errormessage-value-missing"),window.clearInterval(e))},1e3)},onExceptionInterface:function(a,t){e.tips('<span class="text-danger">'+t+"</span>",5)}};e.request(e.sendSmsApiUrl,d,l),a.preventDefault()})})},LoginController.prototype.refreshValidateCode=function(){},$(document).ready(function(){new LoginController});