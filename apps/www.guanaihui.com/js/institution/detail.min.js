function DetailsController(){Controller.call(this),this.servicesCategory(),this.rollImg(),this.bindShopClick(),this.shopFilter()}DetailsController.prototype.rollImg=function(){var t=this;require([t.utilStaticPrefix+"/jquery.slide.min.js"],function(){$(".viewer img").attr("src",$(".inst-img-box .content .item img").attr("src")),$(".inst-img-box").slide({autoPlay:!0,effect:"leftLoop",interTime:4e3,vis:4}),$(".inst-img-box .content .item").click(function(){$(".viewer img").attr("src",$(this).find("img").attr("src"))})})},DetailsController.prototype.createMap=function(t){var a="style='float:left;width:60px;font-weight:500;padding:3px 0px;'",e="style='margin-left:60px;padding:3px 0px;'";point=new BMap.Point(t.ypoint,t.xpoint),map=new BMap.Map("baiduMapContainer"),map.centerAndZoom(point,15),marker=new BMap.Marker(point),map.addOverlay(marker),marker.setAnimation(BMAP_ANIMATION_BOUNCE);var n=new BMap.InfoWindow("        <dl>            <dt "+a+">机构名称：</dt>                <dd "+e+">"+t.name+"</dd>            </dl>            <dl>                <dt "+a+">门店地址：</dt>                <dd "+e+">"+t.address+"</dd>            </dl>            ",{padding:10,width:200});marker.addEventListener("click",function(){this.openInfoWindow(n)}),map.addControl(new BMap.MapTypeControl),map.enableScrollWheelZoom(!1),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.ScaleControl),map.addControl(new BMap.OverviewMapControl),map.addControl(new BMap.MapTypeControl),map.panTo(point)},DetailsController.prototype.bindShopClick=function(){var t=this;$("#shopList li").on("click",function(){var a=$(this);$("#shopList li.selected").removeClass("selected"),a.addClass("selected");var e={};e.xpoint=a.attr("lat"),e.ypoint=a.attr("long"),e.name=a.attr("name"),e.address=a.attr("address"),t.createMap(e),$("#spanParking").html(a.find("#hidParking").val()),$("#spanSubway").html(a.find("#hidSubway").val()),$("#spanBus").html(a.find("#hidBus").val())}),$("#shopList li.selected").click()},DetailsController.prototype.shopFilter=function(){var t=this;$("#area").change(function(){var a=$("#companyId").val(),e=$(this).val();$.post("/company/shop/data",{companyId:a,areaId:e},function(a){if($("#shopList").empty(),$("#shopCount").html(a.length),a.length>0){for(var e=0;e<a.length;e++){var n=a[e],i=$("#shopTemplate").clone();$(i).attr("lat",n.latitude),$(i).attr("long",n.longitude),$(i).attr("address",n.address),$(i).attr("name",n.name),$(i).find("dl dt span").html(n.businessHours),$(i).find("dl dd").html($("h1").html()+"（"+n.name+"）"),$(i).find("#hidParking").val(n.parkingDetail),$(i).find("#hidSubway").val(n.subwayTips),$(i).find("#hidBus").val(n.busTips),$(i).find(".address").html(n.address),$(i).removeClass("hidden"),0==e?$(i).addClass("selected"):$(i).removeClass("selected"),$("#shopList").append($(i))}t.bindShopClick()}else $("#shopList").append("<li>暂无门店</li>"),$("#spanParking").html("暂无"),$("#spanSubway").html("暂无"),$("#spanBus").html("暂无")},"json")})},$(document).ready(function(){new DetailsController});