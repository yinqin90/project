/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：m.360guanai.com
 2. 页面名称：items(套餐体检项目)
 3. 作者：赵华刚(zhaohuagang@guanaihui.com)
 4. 备注：
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
function CheckItems(params) {
    this.scope = params.scope;
    this.itemsInitStatus = (params === null || params.itemsInitStatus === null || params.itemsInitStatus === undefined) ? "retract" : params.itemsInitStatus; //体检项的备注是展开还是收起状态，可以是：retract | expand
    this.switchTo($(this.scope).find(".item-category-handle .active").attr("for"));
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    初始化体健项目描述的展开收起状态
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.init();
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    句柄绑定切换事件
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.addListenerToHandle();
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    检查项目描述的展开收起
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.switchDesc();
};
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
初始化体健项目描述的展开收起状态
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
CheckItems.prototype.init = function() {
    if (this.itemsInitStatus === "retract") {
        $(this.scope).find(".check-items dt .iconfont").addClass("icon-xiangxia2");
        $(this.scope).find(".check-items dd").hide(100);
    } else {
        $(this.scope).find(".check-items dt .iconfont").addClass("icon-xiangshang3");
        $(this.scope).find(".check-items dd").show(100);
    }

    //初始男性体检项
    $(this.scope).find(".check-items dl").each(function() {
        if ($(this).hasClass('male')) {
            $(this).parent().show(100);
            $(this).show(100);
        } else {
            $(this).parent().hide(100);
            $(this).hide(100);
        }
    });
};
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
切换到某个类别
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
CheckItems.prototype.switchTo = function(category) {
    $(this.scope).find(".check-items dl").each(function() {
        if ($(this).hasClass(category)) {
            $(this).parent().show(100);
            $(this).show(100);
        } else {
            $(this).parent().hide(100);
            $(this).hide(100);
        }
    });
};
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
句柄绑定切换事件
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
CheckItems.prototype.addListenerToHandle = function() {
    var classSelf = this;
    $(this.scope).find(".item-category-handle .btn").click(function() {
        $(classSelf.scope).find(".item-category-handle .btn").removeClass("active");
        $(this).addClass("active");
        classSelf.switchTo($(this).attr("for"));
    });
};
/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
检查项目描述的展开收起
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
CheckItems.prototype.switchDesc = function() {
    $(this.scope).find(".check-items dl dt").click(function() {
        $(this).siblings("dd").toggle(100);
        $(this).find(".iconfont").toggleClass("icon-xiangshang3").toggleClass("icon-xiangxia2");
    });
};
