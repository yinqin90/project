function ListController(){Controller.call(this),this.switchSuits(),this.switchDistrictSelectPanel(),this.loadingMore()}ListController.prototype.switchDistrictSelectPanel=function(){var t=this;require([t.appStaticPrefix+"/floatWindow.min.js"],function(){var i=$("#selectRegionWindow");i.find(".float-window-body").load(i.find(".float-window-body").attr("data-source"),function(){require([t.appStaticPrefix+"/home/district.min.js"],function(){new District({floatWindows:i,popTrigger:$("#filter-panel .region"),floatWindowsHeader:$(".float-window-header"),floatWindowBody:$(".float-window-body .city-district")})})});new FloatWindow({popTrigger:$("#filter-panel .region"),floatWindows:i})})},ListController.prototype.switchSuits=function(){$("#listContainer").delegate(".suits .switcher","click",function(){$(this).find("i").toggleClass("icon-xiangxia2").toggleClass("icon-xiangshang3"),$(this).siblings(".more-suit").toggle(100)})},ListController.prototype.loadingMore=function(){var t=this,i=$("#dataLoadStatus"),s=!1;0!=i.length&&void 0!=i&&$(window).on("scroll",function(){var a=$(window).height()+$(window).scrollTop();a>i.offset().top?s||(s=!0,t.getHcsList()):s=!1})},ListController.prototype.getHcsList=function(){var t=this,i=$("#lblArea").data("cityid"),s=$("#lblArea").data("districtid"),a=$("#lblMI").data("id"),o=$("#lblProductGroup").data("id"),r=parseInt($("#dataLoadStatus").data("index")),n=parseInt($("#dataLoadStatus").data("pagecount"));if(n>r){var d={CityId:i,DistId:s,MI_Id:a,ProductGroupId:o,pageIndex:parseInt(r)+1};this.request(this.hcsListApiUrl,d,{showLoadingTips:!1,process:function(i){t.renderHcsList(i),$("#dataLoadStatus").data("index",parseInt(r)+1)}})}else $(window).off("scroll"),$("#dataLoadStatus").html("已经是最后一页了")},ListController.prototype.renderHcsList=function(t){function i(t){var i,s,a,o;if(void 0!=t){if(o=t.Id,i='<a href="'+t.DetailUrl+'">',i+="<dl>",i+='<dt><img src="'+t.ImageUrl+'" class="lazy"></dt>',i+='<dd class="caption">'+t.Name+"</dd>",i+="<dd>"+t.Address+"</dd>",i+='<dd><i class="iconfont icon-dingxiang2"></i><span>'+t.NewDistanceDisplay+"</span></dd>",i+="</dl>",i+="</a>",void 0!=t.SupportProducts){for(s='<ul class="suits">',a=0;a<t.SupportProducts.length;a++)s+=a>2?'<li class="more-suit">':"<li>",s+='<span class="sn">'+(a+1)+"</span>",s+='<a class="name" href="/product/Details?id='+t.SupportProducts[a].Id+'">'+t.SupportProducts[a].Name+"</a>",s+='<span class="current-price">￥'+t.SupportProducts[a].SalesPriceDisplayName+"</span>",s+='<span class="original-price">￥'+t.SupportProducts[a].SRPDisplayName+"</span>",s+='<a href="/Booking/Product?pId='+t.SupportProducts[a].Id+"&sId="+o+'" class="btn btn-success btn-xs pull-right">预约</a>',s+="</li>";a>3&&(s+='<li class="switcher"><i class="iconfont icon-xiangxia2"></i></li>'),s+="</ul>"}i+=s}return i}var s=$(".tabs-frame");if(void 0!=t&&void 0!=t.result)for(var a=0;a<t.result.length;a++)$(i(t.result[a])).appendTo(s)},ListController.prototype.genHcsItem=function(t){var i,s,a,o;if(void 0!=t){if(o=t.Id,i='<a href="'+t.DetailUrl+'">',i+="<dl>",i+='<dt><img src="'+t.ImageUrl+'" class="lazy"></dt>',i+='<dd class="caption">'+t.Name+"</dd>",i+="<dd>"+t.Address+"</dd>",i+='<dd><i class="iconfont icon-dingxiang2"></i><span>'+t.NewDistanceDisplay+"</span></dd>",i+="</dl>",i+="</a>",void 0!=t.SupportProducts){for(s='<ul class="suits">',a=0;a<t.SupportProducts.length;a++)s+=a>2?'<li class="more-suit">':"<li>",s+='<span class="sn">'+(a+1)+"</span>",s+='<a class="name" href="/product/Details?id='+t.SupportProducts[a].Id+'">'+t.SupportProducts[a].Name+"</a>",s+='<span class="current-price">￥'+t.SupportProducts[a].SalesPriceDisplayName+"</span>",s+='<span class="original-price">￥'+t.SupportProducts[a].SRPDisplayName+"</span>",s+='<a href="/Booking/Product?pId='+t.SupportProducts[a].Id+"&sId="+o+'" class="btn btn-success btn-xs pull-right">预约</a>',s+="</li>";a>3&&(s+='<li class="switcher"><i class="iconfont icon-xiangxia2"></i></li>'),s+="</ul>"}i+=s}return i},$(document).ready(function(){new ListController});