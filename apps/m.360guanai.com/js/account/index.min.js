function IndexController(){Controller.call(this),this.submitForm(),this.SendSms()}IndexController.prototype.SendSms=function(){var a=this;require([a.utilStaticPrefix+"/validation/js/languages/jquery.validationEngine-zh_CN.js",a.utilStaticPrefix+"/validation/js/jquery.validationEngine.js"],function(){$("form").validationEngine({promptPosition:"topLeft",autoHidePrompt:!0,autoHideDelay:5e3,showOneMessage:!0,maxErrorsPerField:1,validationEventTrigger:""}),$("#btnSendSms").on("click",function(b){var c,d=60,e=$(this),f=$("form input[name='mobile']"),g=$("form input[name='validateCode']");if(void 0!=g.attr("data-validation-engine")&&(g.removeAttr("data-validation-engine"),g.removeAttr("data-errormessage-value-missing")),c=$("form").validationEngine("validate"),!c)return!1;if(e.hasClass(".disabled"))return!1;var h={mobile:$.trim(f.val()),smsType:0},i={process:function(a){e.addClass("disabled"),g.attr("data-validation-engine","validate[required]"),g.attr("data-errormessage-value-missing","验证码不能为空");var b=window.setInterval(function(){d-=1,e.html("重新发送("+d+"s)"),0===d&&(e.html("发送验证码"),e.removeClass("disabled"),g.removeAttr("data-validation-engine"),g.removeAttr("data-errormessage-value-missing"),window.clearInterval(b))},1e3)},onExceptionInterface:function(b,c){a.tips('<span class="text-danger">'+c+"</span>",5)}};a.request(a.sendSmsApiUrl,h,i),b.preventDefault()})})},IndexController.prototype.submitForm=function(){var a=this;require(["//cdn01.360guanai.com/guanaihui/jssrc/jquery.ajaxsave.js"],function(){var b=$("form input[name='validateCode']");$("form").ajaxsave({dataType:a.apiDataType,beforeSaveInterface:function(){void 0==b.attr("data-validation-engine")&&(b.attr("data-validation-engine","validate[required]"),b.attr("data-errormessage-value-missing","验证码不能为空")),$("form").attr("action",a.loginApiUrl)},onSavingInterface:function(){a.tips("正在进行处理，请稍等...",3)},onErrorInterface:function(){a.tips("请求失败，请检查您的接口！",3)},onSuccessInterface:function(b){void 0!=b&&""!=b?window.location.href=b:window.location.href=a.welcomeUrl},onExceptionInterface:function(b){a.tips('<span class="text-danger">'+b+"</span>",5)}})})},$(document).ready(function(){new IndexController});