function ListController(){Controller.call(this),this.loadingMore(),this.bind()}ListController.prototype.bind=function(){var t=this;$(".tabs-frame").delegate(".icon-gouwuchekong","click",function(a){var o=$(this).data("id"),r={productId:o,optype:0,qty:1};t.request(t.shoppingCardAddApiUrl,r,{showLoadingTips:!1,process:function(){window.location.href=t.shoppingCardUrl}}),a.stopPropagation(),a.preventDefault()})},ListController.prototype.loadingMore=function(){var t=this,a=$("#dataLoadStatus"),o=!1;0!=a.length&&void 0!=a&&$(window).on("scroll",function(){var a=$(window).height()+$(window).scrollTop()-100;a>ctlMorhospitls.offset().top?o||(o=!0,t.getProductList()):o=!1})},ListController.prototype.getProductList=function(){var t=this,a=$("#lblVersion").data("id"),o=$("#lblCardGroup").data("id"),r=$("#lblOrder").data("id"),i=parseInt($("#dataLoadStatus").data("index")),d=parseInt($("#dataLoadStatus").data("pagecount"));if(d>i){var n={Version:a,CardGroupId:o,OrderBy:r,pageIndex:parseInt(i)+1};this.request(t.cardListApiUrl,n,{showLoadingTips:!1,process:function(a){t.renderProductList(a),$("#dataLoadStatus").data("index",parseInt(i)+1)}})}else $(window).off("scroll"),$("#dataLoadStatus").html("已经是最后一页了")},ListController.prototype.renderProductList=function(t){var a=this,o=$(".tabs-frame");if(void 0!=t&&void 0!=t.result)for(var r=0;r<t.result.length;r++)$(a.genProdcutItem(t.result[r])).appendTo(o)},ListController.prototype.genProdcutItem=function(t){var a;return void 0!=t&&(a='<a href="/Card/Detail?Id='+t.Id+'">',a+="<dl>",a+='<dt><img src="'+t.ListImageUrl+'"></dt>',a+='<dd class="caption">'+t.Name+"</dd>",a+="<dd>",a+='<span class="current-price">￥'+t.SalesPriceDisplayName+"</span>",a+='<span class="original-price">|￥'+t.SRPDisplayName+"</span>",a+="</dd>",a+='<dd><i class="iconfont icon-biaoqian"></i> <span class="text-success">'+t.TagDisplayName+"</span></dd>",a+='<dd>本月已有 <span class="arial text-danger">'+t.Quantity+'</span> 人购买<i class="iconfont icon-gouwuchekong" data-id="'+t.Id+'"></i></dd>',a+="</dl>",a+="</a>"),a},$(document).ready(function(){new ListController});