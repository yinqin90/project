function ListController(){Controller.call(this),this.loadingMore()}ListController.prototype.loadingMore=function(){var a=this,b=$("#dataLoadStatus"),c=!1;0!=b.length&&void 0!=b&&$(window).on("scroll",function(){var d=$(window).height()+$(window).scrollTop()-100;d>b.offset().top?c||(c=!0,a.getProductList()):c=!1})},ListController.prototype.getProductList=function(){var a=this,b=$("#lblVersion").data("id"),c=$("#lblCardGroup").data("id"),d=$("#lblOrder").data("id"),e=parseInt($("#dataLoadStatus").data("index")),f=parseInt($("#dataLoadStatus").data("pagecount"));if(f>e){var g={Version:b,CardGroupId:c,OrderBy:d,pageIndex:parseInt(e)+1};this.request(this.productListApiUrl,g,{showLoadingTips:!1,process:function(b){a.renderProductList(b),$("#dataLoadStatus").data("index",parseInt(e)+1)}})}else $(window).off("scroll"),$("#dataLoadStatus").html("已经是最后一页了")},ListController.prototype.renderProductList=function(a){var b=this,c=$(".tabs-frame");if(void 0!=a&&void 0!=a.result)for(var d=0;d<a.result.length;d++)$(b.genProdcutItem(a.result[d])).appendTo(c)},ListController.prototype.genProdcutItem=function(a){var b;return void 0!=a&&(b='<a href="/Product/Detail?Id='+a.Id+'">',b+="<dl>",b+='<dt><img src="'+a.ListImageUrl+'"></dt>',b+='<dd class="caption">'+a.Name+"</dd>",b+="<dd>",b+='<span class="current-price">￥'+a.SalesPriceDisplayName+"</span>",b+='<span class="original-price">|￥'+a.SRPDisplayName+"</span>",b+="</dd>",b+='<dd><i class="iconfont icon-biaoqian"></i> <span class="text-success">'+a.TagDisplayName+"</span></dd>",b+='<dd>本月已有 <span class="arial text-danger">'+a.Quantity+"</span> 人购买</dd>",b+="</dl>",b+="</a>"),b},$(document).ready(function(){new ListController});