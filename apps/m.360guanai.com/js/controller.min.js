function Controller(){this.environment="test",this.staticDomainPrefix="test"===this.environment?"static":"cdn",this.staticDomain="//"+this.staticDomainPrefix+"01.360guanai.com",this.utilStaticPrefix=this.staticDomain+"/guanaihui/js/util",this.appStaticPrefix=this.staticDomain+"/apps/m.360guanai.com/js",this.cookieDomain=".360guanai.com",this.cookieKeyPrefix="M_",this.cookieKeyConf={userName:this.cookieKeyPrefix+"userName",userId:this.cookieKeyPrefix+"userId",companyName:this.cookieKeyPrefix+"companyName",orderAmount:this.cookieKeyPrefix+"orderAmount",contact:this.cookieKeyPrefix+"contact",tel:this.cookieKeyPrefix+"tel",address:this.cookieKeyPrefix+"address",description:this.cookieKeyPrefix+"description"},this.tipsDialogId="guanaihui-tips",this.confirmDialogId="guanaihui-confirm",this.apiDataType="test"===this.environment?"jsonp":"json",this.apiPrefix="test"===this.environment?"//mtest.360guanai.com":"/",this.sendSmsApiUrl=this.apiPrefix+"/Common/SendSms",this.loginApiUrl=this.apiPrefix+"/Account/Login",this.hcsListApiUrl=this.apiPrefix+"/HealthCheckupStore/GetHcsList",this.productListApiUrl=this.apiPrefix+"/Product/GetProductList",this.cardListApiUrl=this.apiPrefix+"/Card/GetCardList",this.shoppingCardAddApiUrl=this.apiPrefix+"/Cart/AddItem",this.randomDomainSn=function(){var a=parseInt(20*Math.random()+1,10).toString();return a.length<2&&(a="0"+a),a},this.welcomeUrl="/Home",this.logoutRedirectUrl="/Account/loginOut",this.shoppingCardUrl="/Cart",this.createModalDialog=function(a){var b=null===a||null===a.type||void 0===a.type?"dialog":a.type,c=a.id;"tips"===b?c=this.tipsDialogId:"confirm"===b&&(c=this.confirmDialogId);var d=null===a||null===a.tabindex||void 0===a.tabindex?null:a.tabindex,e=$(document.createElement("DIV")).attr("id",c).attr("role","dialog").attr("aria-labelledby","myModalLabel").addClass("modal fade");d&&$(e).attr("tabindex",d);var f=$(document.createElement("DIV")).attr("role","document").addClass("modal-dialog").append($(document.createElement("DIV")).addClass("modal-content"));$(e).append(f),$("body").prepend(e)},this.dialog=function(a){var b=null===a||null===a.tabindex||void 0===a.tabindex?null:a.tabindex;$("#"+a.id).size()>0&&$("#"+a.id).remove(),this.createModalDialog({type:"dialog",id:a.id,tabindex:b}),$("#"+a.id).modal({remote:a.url}),$.fn.modal.Constructor.prototype.enforceFocus=function(){}},this.tips=function(a,b,c){var d=this;$("#"+this.tipsDialogId).size()>0?($("#"+this.tipsDialogId+" .modal-tips").html(a),$("#"+this.tipsDialogId).modal("show")):(this.createModalDialog({type:"tips"}),$("#"+this.tipsDialogId).addClass("bs-example-modal-sm"),$("#"+this.tipsDialogId+" .modal-dialog").addClass("modal-sm"),$("#"+this.tipsDialogId+" .modal-content").append($(document.createElement("DIV")).addClass("modal-tips").html(a)),$("#"+this.tipsDialogId).modal({keyboard:!0})),b&&window.setTimeout(function(){$("#"+d.tipsDialogId).modal("hide"),c&&c()},1e3*b)},this.confirm=function(a){var b=this,c=null===a||null===a.title||void 0===a.title?"系统确认":a.title,d=null===a||null===a.content||void 0===a.content?"":a.content,e=null===a||null===a.showConfirmBtn||void 0===a.showConfirmBtn?!0:a.showConfirmBtn,f=null===a||null===a.confirmLabel||void 0===a.confirmLabel?"确认":a.confirmLabel,g=null===a||null===a.showCancelBtn||void 0===a.showCancelBtn?!0:a.showCancelBtn,h=null===a||null===a.cancelLabel||void 0===a.cancelLabel?"取消":a.cancelLabel,i=null===a||null===a.confirmInterface||void 0===a.confirmInterface?null:a.confirmInterface,j=null===a||null===a.cancelInterface||void 0===a.cancelInterface?null:a.cancelInterface;$("#"+this.confirmDialogId).size()>0&&$("#"+this.confirmDialogId).remove(),this.createModalDialog({type:"confirm"}),$("#"+this.confirmDialogId+" .modal-content").append($(document.createElement("DIV")).addClass("modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+c+"</h4>")),$("#"+this.confirmDialogId+" .modal-content").append($(document.createElement("DIV")).addClass("modal-confirm").html(d));var k=$(document.createElement("DIV")).addClass("modal-footer");if(e){var l=$(document.createElement("BUTTON")).attr("type","button").addClass("btn btn-primary btn-sm").text(f);$(l).click(function(){i&&i(),$("#"+b.confirmDialogId).modal("hide")}),$(k).append(l)}if(g){var m=$(document.createElement("BUTTON")).attr("type","button").addClass("btn btn-default btn-sm").attr("data-dismiss","modal").text(h);$(m).click(function(){j&&j()}),$(k).append(m)}$("#"+this.confirmDialogId+" .modal-content").append(k),$("#"+this.confirmDialogId).modal({keyboard:!0})},this.request=function(a,b,c){var d=this,e=null===c||null===c.type||void 0===c.type?"GET":c.type,f=null===c||null===c.process||void 0===c.process?null:c.process,g=(null===c||null===c.showLoadingTips||void 0===c.showLoadingTips?!0:c.showLoadingTips,null===c||null===c.loadingTips||void 0===c.loadingTips?"正在加载数据，请稍等...":c.loadingTips),h=null===c||null===c.apiDataType||void 0===c.apiDataType?this.apiDataType:c.apiDataType,i=null===c||null===c.onExceptionInterface||void 0===c.onExceptionInterface?null:c.onExceptionInterface;this.showLoadingTips&&this.tips(g);try{$.ajax({url:a,type:e,data:b,dataType:h,error:function(a){d.tips("调用数据接口失败！请测试您的数据接口！",3)},success:function(a){$("#"+d.tipsDialogId).modal("hide"),"301"===a.code.toString()?d.clearCookieRedirect():"200"===a.code.toString()?f&&f(a):(d.tips(a.message,3),i&&i(a.code,a.message))}})}catch(j){d.tips("错误名称："+j.name+"\n错误描述："+j.message,3)}},this.scrollUp=function(){require([this.utilStaticPrefix+"/jquery.scrollup.min.js"],function(){$("#floater .scroll-up").scrollup({topDistance:100})})},this.lazyload=function(){require([this.utilStaticPrefix+"/jquery.lazyload.min.js"],function(){$(".lazy").lazyload()})},this.switchSearcher=function(){$("header .assistant-tools .search").click(function(){$("#searcher").toggle("normal"),$(this).toggleClass("active")})},this.switchNav=function(){$("header .assistant-tools .nav").click(function(){$("nav").toggle("normal"),$(this).toggleClass("active")})},this.cmsImageProcess=function(){$(".cms img").removeAttr("style").addClass("img-responsive"),$(".fixed-toolbar").css({width:"100%"})},this.onload=function(){this.scrollUp(),this.lazyload(),this.switchSearcher(),this.switchNav(),this.cmsImageProcess()},this.onload()}